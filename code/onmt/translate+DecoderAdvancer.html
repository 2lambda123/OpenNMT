<p><a name="onmt.DecoderAdvancer.dok"></a></p>

<h2>onmt.DecoderAdvancer</h2>

<p>DecoderAdvancer is an implementation of the interface Advancer for
  specifyinghow to advance one step in decoder.</p>

<p><a name="onmt.DecoderAdvancer"></a></p>

<h3>onmt.DecoderAdvancer(decoder, batch, context, max_sent_length, max_num_unks, decStates, dicts, length_norm, coverage_norm, eos_norm, updateSeqLengthFunc)</h3>

<p>Constructor.</p>

<p>Parameters:</p>

<ul>
<li><code>decoder</code> - an <code>onmt.Decoder</code> object.</li>
<li><code>batch</code> - an <code>onmt.data.Batch</code> object.</li>
<li><code>context</code> - encoder output (batch x n x rnnSize).</li>
<li><code>max_sent_length</code> - optional, maximum output sentence length.</li>
<li><code>max_num_unks</code> - optional, maximum number of UNKs.</li>
<li><code>decStates</code> - optional, initial decoder states.</li>
<li><code>dicts</code> - optional, dictionary for additional features.</li>
<li><code>updateSeqLengthFunc</code> - optional, sequence length adaptation function after encoder</li>
</ul>

<p><a name="onmt.DecoderAdvancer:initBeam"></a></p>

<h3>onmt.DecoderAdvancer:initBeam()</h3>

<p>Returns an initial beam.</p>

<p>Returns:</p>

<ul>
<li><code>beam</code> - an <code>onmt.translate.Beam</code> object.</li>
</ul>

<p><a name="onmt.DecoderAdvancer:update"></a></p>

<h3>onmt.DecoderAdvancer:update(beam)</h3>

<p>Updates beam states given new tokens.</p>

<p>Parameters:</p>

<ul>
<li><code>beam</code> - beam with updated token list.</li>
</ul>

<p><a name="onmt.DecoderAdvancer:expand"></a></p>

<h3>onmt.DecoderAdvancer:expand(beam)</h3>

<p>Expand function. Expands beam by all possible tokens and returns the
  scores.</p>

<p>Parameters:</p>

<ul>
<li><code>beam</code> - an <code>onmt.translate.Beam</code> object.</li>
</ul>

<p>Returns:</p>

<ul>
<li><code>scores</code> - a 2D tensor of size <code>(batchSize * beamSize, numTokens)</code>.</li>
</ul>

<p><a name="onmt.DecoderAdvancer:isComplete"></a></p>

<h3>onmt.DecoderAdvancer:isComplete(beam)</h3>

<p>Checks which hypotheses in the beam are already finished. A hypothesis is
  complete if i) an onmt.Constants.EOS is encountered, or ii) the length of the
  sequence is greater than or equal to <code>max_sent_length</code>.</p>

<p>Parameters:</p>

<ul>
<li><code>beam</code> - an <code>onmt.translate.Beam</code> object.</li>
</ul>

<p>Returns: a binary flat tensor of size <code>(batchSize * beamSize)</code>, indicating
  which hypotheses are finished.</p>

<p><a name="onmt.DecoderAdvancer:filter"></a></p>

<h3>onmt.DecoderAdvancer:filter(beam)</h3>

<p>Checks which hypotheses in the beam shall be pruned. We disallow empty
 predictions, as well as predictions with more UNKs than <code>max_num_unks</code>.</p>

<p>Parameters:</p>

<ul>
<li><code>beam</code> - an <code>onmt.translate.Beam</code> object.</li>
</ul>

<p>Returns: a binary flat tensor of size <code>(batchSize * beamSize)</code>, indicating
  which beams shall be pruned.</p>
